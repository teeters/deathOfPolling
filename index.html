<!doctype html>
<head>
  <title>Reports Of The Death Of Polling Have Been Greatly Exaggerated</title>
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <style>
    .row:after{
      content:"";
      display:table;
      clear:both;
    }
    .column{
      float:left;
      width:50%;
    }

    .column svg{
      width:80%;
      height:auto;
    }

    .icon-source{
      display:none;
    }
  </style>
</head>
<body>

  <h1 class="headline__title">Reports Of The Death Of Polling Have Been Greatly Exaggerated</h1>
  <p><big>By <span><a rel="nofollow" href="https://theconversation.com/profiles/ole-j-forsberg-182212">Ole J. Forsberg</a>, <em><a rel="nofollow" href="http://theconversation.com/institutions/knox-college-2259">Knox College</a></em></span></big></p>
<p>The first words anyone spoke to me once the election results came in were "What went wrong?" To which I replied, "I was tired and had trouble tying my tie. I'll fix it before I get to class." Far from being sartorially flippant, the point I was making was this: Nothing went "wrong." The polls worked like they were supposed to work. If there was a problem, it was in how they were used - and the fact that we all forgot they deal in probabilities and not certainties.</p>
<p><h2>Polling theory dictates the process</h2></p>
<div class="row">
  <div class="column">
  <p>In political polls, like those we've been subjected to for the past 11 months, pollsters seek to estimate the position of those who will vote in the election. This is a notoriously difficult target to hit; until we vote, we cannot be certain if we will vote. Because the population of "people who've cast ballots in the 2016 presidential election" does not yet exist, pollsters must draw their sample from some other - hopefully related - population. They could choose adults, registered voters, or likely voters. None of these sampled populations are identical to the target population. </p>
  <p>No sample can be exactly the same as the population of interest - and that difference is the source of a poll's first structural source of uncertainty. However, methods exist to reduce structural bias by increasing the likelihood that our small sample is representative of the larger population. </p>
  <p>The gold standard in terms of lowering bias is "simple random sampling." In SRS, a sample is polled from the target population, wherein each person has the same probability of being selected, and the estimates reported are based solely on those polled. The beauty of a truly random sample is that it will, on average, give great estimates of the population. Its main problem is that it is heavily dependent on who winds up in the sample itself. This creates highly variable polls. </p>
  </div>
  <div class="column">
    <svg id="general-sampling"></svg>
  </div>
</div>

<div class="row">
  <div class="column">
  <p>To control this variability, polling firms may use stratification - a process that attempts to weight the polls to match the demographics of the overall population. For instance, if 30 percent of voters are Republican and only 10 percent of your sample is, you'd increase the weight given to your Republicans' responses to account for your poll having too few of them.</p>
  <p>When done well, stratification reduces the inherent variability of poll results by exchanging some of that variability for bias. You're swapping random error for systematic error. If your estimates of the proportion of voters who are Republican is wrong, your estimates are incorrectly weighted. </p>
  <p>To make this concrete, simple random sampling estimates are like a pattern from a well-aimed shotgun. The average of the pattern is the center of the target, even if none of the shot actually hit it. Stratified sampling is like the pattern of a rifle: tight, but perhaps not centered on the target.</p>
  </div>
  <div class="column">
    <svg id="stratified-sampling"></svg>
  </div>
</div>

<p><h2>Getting the answers</h2></p>
<p>A second issue arises in contacting the sample.</p>
<div class="row">
  <div class="column">
  <p>The 2012 election showed that relying solely on landline telephones produces estimates that <a rel="nofollow" href="https://www.sciencedaily.com/releases/2015/06/150615142851.htm">tend to overestimate Republican support</a>. On the other hand, calling cellphones is much more expensive.</p>
  <p>Some polling organizations - including <a rel="nofollow" href="http://www.theecps.com/">Emerson College</a> - stayed with calling only landlines. Others called a set proportion of cellphones. <a rel="nofollow" href="http://www.publicpolicypolling.com/">Public Policy Polling</a> stuck with calling 80 percent landline and 20 percent cellphone throughout the election cycle. <a rel="nofollow" href="https://www.monmouth.edu/polling-institute/">Monmouth University</a> tended closer to a 50-50 split.</p>
  <p>Other firms gave up on the telephone altogether. <a rel="nofollow" href="https://blog.electiontracking.surveymonkey.com/2016/10/19/surveymonkey-election-tracking-methodology/">Survey Monkey</a> relied on their large database of online users. The <a rel="nofollow" href="http://graphics.latimes.com/usc-presidential-poll-dashboard/">University of Southern California</a> created a panel of approximately 3,000 people and polled the same group online throughout the cycle.</p>
  <p>Be assured that in the weeks ahead, polling analysts will be looking at these different methods to determine which gave estimates closest to the eventual result. We can already draw some preliminary conclusions. One is that <a rel="nofollow" href="http://cesrusc.org/election/">the LA Times/USC poll</a>, which polled the same panel of people online over time, seems to have overestimated Trump support. Their final estimates were 48.2 percent Clinton and 51.8 percent Trump (as proportion of the two-party vote). The current popular vote is split 50.1 percent Clinton to 49.9 percent Trump.</p>
  <p>A second takeaway is that the polls from Marist University, which contacted a blend of landline and cellphone users, may have come closest at the national level. <a rel="nofollow" href="http://www.mcclatchydc.com/news/politics-government/election/article112635048.html">Their last estimates on November 3</a> had the national race at 50.6 percent Clinton and 49.4 percent Trump, as proportion of the two-party vote. </p>
  </div>
  <div class="column">
    <svg id="telephone-sampling"></svg>
  </div>
</div>
<p><h2>The interpretation</h2></p>
<p>Once the polling firms produce their estimates, interpretation is in the hands of the various users.</p>
<p>From the standpoint of researchers, the polls gave what we wanted: data from which to gauge public opinion. After an excellent 2012 season, analyst Nate Silver put his reputation on the line with some decisions he made about <a rel="nofollow" href="http://fivethirtyeight.com/features/a-users-guide-to-fivethirtyeights-2016-general-election-forecast/">his estimation process</a>: he adjusted a smoothing parameter late in the election cycle. The effect made his polls more responsive to changes in the polls. Statistically speaking, this means Silver is assuming that people are less likely to change position early in the election cycle, but may change more easily later. </p>
<p>Among others, the Huffington Post accused him of "<a rel="nofollow" href="http://www.huffingtonpost.com/entry/nate-silver-election-forecast_us_581e1c33e4b0d9ce6fbc6f7f">putting his thumb on the scales</a>" in favor of Trump. However, Silver made his adjustments <a rel="nofollow" href="http://fivethirtyeight.com/features/heres-proof-some-pollsters-are-putting-a-thumb-on-the-scale/">to reflect observed human nature and action</a>. The results support him. Where the Huffington Post had predicted a <a rel="nofollow" href="http://www.nytimes.com/interactive/2016/upshot/presidential-polls-forecast.html">Clinton victory with 98 percent confidence</a>, Silver's FiveThirtyEight gave her <a rel="nofollow" href="http://fivethirtyeight.com/features/final-election-update-theres-a-wide-range-of-outcomes-and-most-of-them-come-up-clinton/">only a 71 percent chance of winning</a>.</p>
<p>Using the various polls, most major sites had the <a rel="nofollow" href="http://www.nytimes.com/interactive/2016/upshot/presidential-polls-forecast.html">probability of a Clinton victory around 90 percent</a>. My own model put the probability at 80 percent.</p>

<p>From the standpoint of the media, the polls provided a great narrative, a story to tell and motivate their readers. Most major news organizations included <a rel="nofollow" href="http://www.cbsnews.com/news/clinton-trump-even-in-ohio-and-florida-two-days-before-election-cbs-poll/">standard boilerplate</a> about the polls being estimates, that they have a margin of error and that the margin of error holds 95 percent of the time.</p>
<p>However, in many cases, journalists didn't seem to understand what those words meant. If the margin of error is +/- 2.5 and the support for Clinton drops 2 percent, that's not a statistically significant change. There is no evidence that it is anything more than background noise. If the margin of error is +/- 2.5 and the support for Trump rises 3 percent, that is a statistically significant change. However, as this margin of error is measured at the 95 percent level of confidence, even those "significant changes" are wrong 5 percent of the time.</p>
<p>To help solve these problems, I think journalists covering elections should take a statistics course or a polling course. There is information in the numbers, and it behooves us all to understand what it does and does not say.</p>
<p>Finally, as with the media, the polls gave the public a great story, one that could support their views - as long as they chose the "right" polls and ignored the "wrong" ones. In 2012, many on the right <a rel="nofollow" href="http://thehill.com/homenews/campaign/251413-gop-takes-aim-at-skewed-polls">claimed the polls were skewed</a>. Once the election was over and the postmortems done, we found out they actually were, just <a rel="nofollow" href="https://www.campaignsandelections.com/campaign-insider/study-tells-pollsters-call-more-cellphones">not in the direction Republicans had claimed</a>.</p>
<p>The story line of skewed polls was never rebutted in the minds of the general population. As a result, <a rel="nofollow" href="http://www.politico.com/story/2016/06/donald-trump-polls-bias-224903">confidence in polls</a> remains very low. It's becoming more common for people to see polling as unethical and as a tool that <a rel="nofollow" href="http://www.breitbart.com/radio/2016/10/12/pat-caddell-nbcwsj-poll-unprecedented-unethical-intended-push-trump-done-narrative/">advances a particular narrative</a>. </p>
<p>And in fact, many polls are performed to push a political view. The <a rel="nofollow" href="http://www.vanityfair.com/news/2004/11/mccain200411">push polling in South Carolina</a> by Bush supporters in 2000 is the most notorious example of this. In the days leading up to the South Carolina primary, a group supporting George W. Bush "polled" residents, <a rel="nofollow" href="http://www.vanityfair.com/news/2004/11/mccain200411">asking inflammatory questions about his opponent John McCain</a>. The responses of those contacted were never recorded and analyzed. The sole purpose of a push poll like this is to disseminate information and influence respondents. Is it any wonder many do not trust polls?</p>
<p><h2>Is polling dead?</h2></p>
<div class="row">
  <div class="column">
  <p>Today, many people are talking about <a rel="nofollow" href="http://www.huffingtonpost.com/jeanne-zaino/the-death-of-polling-midt_b_6129654.html">the death of polling</a>. Apparently, we seem to forget that probabilities attach themselves to polling at every step in the process. The sample is a random sample from a sampled population. The target population does not exist until election day. People change their minds about voting. Everywhere in polling, there is probability.</p>
  <p>Nate Silver's model gave Trump a 29 percent chance of winning the presidency. My model gave him a 20 percent chance. What do those probabilities actually mean? Flip a coin twice. If it comes up heads both times, you just elected President Trump - two coin tosses in a row coming up heads has the same probability of happening that many of these polls gave for Trump moving into the White House.</p>
  <p>And yet, polling is a science; we can always learn more. As we move forward, there are many things to learn from this election. Which polling organization was best in terms of its weighting formula? How can we best contact people? What proportion should be cellphones? How can we use online polls to get good estimates?</p>
  <p>Those will be the questions at the forefront of polling research over the next couple years as we grapple with the causes of several recent high-profile polling "failures."</p>
  </div>
  <div class="column">
    <svg id="sampling-timeline"></svg>
  </div>
</div>
  <p><span><a rel="nofollow" href="https://theconversation.com/profiles/ole-j-forsberg-182212">Ole J. Forsberg</a>, Assistant Professor of Mathematics, <em><a rel="nofollow" href="http://theconversation.com/institutions/knox-college-2259">Knox College</a></em></span></p>
  <p>This article was originally published on <a rel="nofollow" href="http://theconversation.com">The Conversation</a>. Read the <a rel="nofollow" href="https://theconversation.com/reports-of-the-death-of-polling-have-been-greatly-exaggerated-68504">original article</a>.</p>
</div>

<!--Icon paths-->
<!--These were supplied by free public galleries on flaticon.com-->
<g id='male'>
		<path d="M239.7,260.2c0.5,0,1,0,1.6,0c0.2,0,0.4,0,0.6,0c0.3,0,0.7,0,1,0c29.3-0.5,53-10.8,70.5-30.5    c38.5-43.4,32.1-117.8,31.4-124.9c-2.5-53.3-27.7-78.8-48.5-90.7C280.8,5.2,262.7,0.4,242.5,0h-0.7c-0.1,0-0.3,0-0.4,0h-0.6    c-11.1,0-32.9,1.8-53.8,13.7c-21,11.9-46.6,37.4-49.1,91.1c-0.7,7.1-7.1,81.5,31.4,124.9C186.7,249.4,210.4,259.7,239.7,260.2z     M164.6,107.3c0-0.3,0.1-0.6,0.1-0.8c3.3-71.7,54.2-79.4,76-79.4h0.4c0.2,0,0.5,0,0.8,0c27,0.6,72.9,11.6,76,79.4    c0,0.3,0,0.6,0.1,0.8c0.1,0.7,7.1,68.7-24.7,104.5c-12.6,14.2-29.4,21.2-51.5,21.4c-0.2,0-0.3,0-0.5,0l0,0c-0.2,0-0.3,0-0.5,0    c-22-0.2-38.9-7.2-51.4-21.4C157.7,176.2,164.5,107.9,164.6,107.3z"></path>
		<path d="M446.8,383.6c0-0.1,0-0.2,0-0.3c0-0.8-0.1-1.6-0.1-2.5c-0.6-19.8-1.9-66.1-45.3-80.9c-0.3-0.1-0.7-0.2-1-0.3    c-45.1-11.5-82.6-37.5-83-37.8c-6.1-4.3-14.5-2.8-18.8,3.3c-4.3,6.1-2.8,14.5,3.3,18.8c1.7,1.2,41.5,28.9,91.3,41.7    c23.3,8.3,25.9,33.2,26.6,56c0,0.9,0,1.7,0.1,2.5c0.1,9-0.5,22.9-2.1,30.9c-16.2,9.2-79.7,41-176.3,41    c-96.2,0-160.1-31.9-176.4-41.1c-1.6-8-2.3-21.9-2.1-30.9c0-0.8,0.1-1.6,0.1-2.5c0.7-22.8,3.3-47.7,26.6-56    c49.8-12.8,89.6-40.6,91.3-41.7c6.1-4.3,7.6-12.7,3.3-18.8c-4.3-6.1-12.7-7.6-18.8-3.3c-0.4,0.3-37.7,26.3-83,37.8    c-0.4,0.1-0.7,0.2-1,0.3c-43.4,14.9-44.7,61.2-45.3,80.9c0,0.9,0,1.7-0.1,2.5c0,0.1,0,0.2,0,0.3c-0.1,5.2-0.2,31.9,5.1,45.3    c1,2.6,2.8,4.8,5.2,6.3c3,2,74.9,47.8,195.2,47.8s192.2-45.9,195.2-47.8c2.3-1.5,4.2-3.7,5.2-6.3    C447,415.5,446.9,388.8,446.8,383.6z"></path>
  </g>

<g id='male2'>
  <path d="M280.79,314.559c83.266,0,150.803-67.538,150.803-150.803S364.055,13.415,280.79,13.415S129.987,80.953,129.987,163.756  S197.524,314.559,280.79,314.559z M280.79,52.735c61.061,0,111.021,49.959,111.021,111.021S341.851,274.776,280.79,274.776  s-111.021-49.959-111.021-111.021S219.728,52.735,280.79,52.735z"></path>
  <path d="M19.891,550.015h523.648c11.102,0,19.891-8.789,19.891-19.891c0-104.082-84.653-189.198-189.198-189.198H189.198  C85.116,340.926,0,425.579,0,530.124C0,541.226,8.789,550.015,19.891,550.015z M189.198,380.708h185.034  c75.864,0,138.313,56.436,148.028,129.524H41.17C50.884,437.607,113.334,380.708,189.198,380.708z"></path>
</g>


<g id='female'>
	<path d="M417.3,453.2c-22-45.7-61.6-81.6-109.6-99.7v-28.9c23.6-1.3,68.1-7.3,94.2-34c3.3-3.4,4.6-8.3,3.4-12.9s-4.8-8.2-9.4-9.5   c-0.4-0.1-34.8-11.9-27.9-82.3c3-30,2.5-57-1.4-80.2c-4.5-26.6-13.5-47.5-26.6-62.1c-14.2-15.7-32.7-23.7-55-23.7   c-0.9,0-1.8,0-2.6,0C273.9,12.5,255.3,0,226.8,0c-13.3,0-27.2,2.7-41.4,8.2l-0.6,0.2c-11.2,4.2-32,12.1-49.6,35.5   c-20.5,27.2-30.3,67.5-29.1,119.7c1.2,52.3-7.4,77.9-14.8,90.2c-6.1,10.1-11.9,12.1-13.4,12.5c-5.1-0.4-9.2,2.2-11.8,6.6   c-2.7,4.5-1.7,10.2,1.3,14.6c1.2,1.8,8.2,11.2,25.1,20.3c19.3,10.4,43.4,16.3,71.9,17.5v27.5C117,370.8,77.6,407,55.3,453.3   c-2,4.2-1.7,9.1,0.7,13c2.5,3.9,6.8,6.3,11.4,6.3h337.8c4.6,0,9-2.4,11.4-6.3C419,462.3,419.3,457.4,417.3,453.2z M90.4,445.5   c21.6-33.2,54-58.3,91.5-70.4c5.6-1.8,9.4-7,9.4-12.8V312c0-3.6-1.4-7.1-4-9.6s-6-4-9.6-3.9c-38.9,0.4-62.4-8.5-75.2-16.1   c0.9-0.9,1.9-1.8,2.9-2.8c19.7-20.5,29-59.7,27.7-116.6c-2.6-105.1,42.1-122.1,61.1-129.3l0.6-0.2c11.2-4.2,21.9-6.4,31.8-6.4   c25.8,0,39,14.2,40.1,15.5c2.8,3.5,7.1,5.2,11.6,4.8c2.2-0.2,4.4-0.3,6.5-0.3c14.5,0,26,4.8,35,14.8c19,21,26.8,65.3,21.2,121.5   c-5.6,56.7,12.1,85.1,27.4,98.9c-20.6,11.4-49.9,15.7-72,15.7c-1.2,0-1.9,0-2,0c-3.6-0.1-7.2,1.3-9.8,3.8c-2.6,2.5-4.1,6-4.1,9.7   v51.7c0,5.9,3.8,11,9.4,12.8c38,12.3,70.5,37.1,92,69.7H90.4V445.5z"></path>
</g>

<g id='female2'>
  <path d="M30,60c-7.955,0-23-1.254-23-6v-2.238c0-3.304,1.801-6.338,4.701-7.92l9.261-5.363c0.065-0.036,0.243-0.143,0.686-0.479  h-7.365c-0.417,0.04-2.533,0.183-4.334-0.895c-0.717-0.429-1.223-1.116-1.427-1.937c-0.206-0.832-0.07-1.728,0.374-2.458  c1.687-2.777,5.662-10.059,6.166-17.674c0.171-2.597,0.66-4.761,1.493-6.612C18.269,4.617,21.934,0.063,29.669,0  c13.203,0.108,13.644,13.482,13.646,13.617c0.154,7.971,5.081,15.82,7.191,18.824c0.561,0.799,0.729,1.797,0.462,2.739  c-0.265,0.934-0.925,1.688-1.811,2.068c-2.403,1.031-5.406,0.76-5.533,0.746L35.955,38c0.331,0.509,0.692,0.942,1.032,1.112  l10.977,4.753C51.089,45.427,53,48.519,53,51.957V54C53,58.746,37.955,60,30,60z M14.231,36h7.949c0.786,0,1.46,0.48,1.718,1.224  c0.257,0.741,0.026,1.535-0.59,2.021c-0.85,0.671-1.185,0.879-1.363,0.977l-9.263,5.364C10.402,46.828,9,49.19,9,51.762V54  c0,1.357,7.412,4,21,4s21-2.643,21-4v-2.043c0-2.677-1.487-5.083-3.881-6.279l-10.977-4.753c-0.986-0.492-1.594-1.418-1.939-2.113  c-0.301-0.605-0.267-1.311,0.09-1.887C34.653,36.346,35.274,36,35.955,36h7.766c0.121,0.009,2.723,0.238,4.649-0.589  c0.33-0.142,0.576-0.425,0.676-0.776c0.103-0.36,0.039-0.74-0.174-1.043c-2.216-3.155-7.39-11.413-7.555-19.934  C41.305,13.189,40.899,2.092,29.669,2c-6.66,0.055-9.817,3.971-11.29,7.245c-0.734,1.631-1.166,3.568-1.321,5.924  c-0.533,8.056-4.689,15.677-6.452,18.579c-0.169,0.279-0.222,0.621-0.143,0.939c0.074,0.3,0.256,0.549,0.511,0.701  c1.366,0.816,3.118,0.619,3.135,0.619L14.231,36z"></path>
</g>

<g id='downarrow'>
<path d="M355.457,370.873c-1.523-3.614-4.288-5.428-8.285-5.428h-63.954V9.135c0-2.666-0.858-4.856-2.569-6.567   C278.944,0.855,276.753,0,274.084,0h-54.818c-2.667,0-4.854,0.855-6.567,2.568c-1.711,1.711-2.57,3.901-2.57,6.567v356.314h-63.953   c-3.806,0-6.567,1.81-8.28,5.428c-1.521,3.613-1.043,6.943,1.431,9.996L240.68,490.505c1.903,1.902,4.187,2.851,6.854,2.851   c2.478,0,4.665-0.948,6.567-2.851l99.927-109.632C356.503,377.82,356.983,374.49,355.457,370.873z"></path>
</g>

<g id='question'>
		<path d="M65.449,6.169C59.748,2.057,52.588,0,43.971,0c-6.559,0-12.09,1.449-16.588,4.34    C20.25,8.871,16.457,16.562,16,27.412h16.531c0-3.158,0.922-6.203,2.766-9.137c1.846-2.932,4.975-4.396,9.389-4.396    c4.488,0,7.58,1.19,9.271,3.568c1.693,2.381,2.539,5.018,2.539,7.91c0,2.513-1.262,4.816-2.781,6.91    c-0.836,1.22-1.938,2.342-3.307,3.369c0,0-8.965,5.75-12.9,10.368c-2.283,2.681-2.488,6.692-2.689,12.449    c-0.014,0.409,0.143,1.255,1.576,1.255c1.433,0,11.582,0,12.857,0s1.541-0.951,1.559-1.362c0.09-2.098,0.326-3.167,0.707-4.377    c0.723-2.286,2.688-4.283,4.893-5.997l4.551-3.141c4.107-3.199,7.385-5.826,8.83-7.883C72.264,33.562,74,29.393,74,24.443    C74,16.373,71.148,10.281,65.449,6.169z M43.705,69.617c-5.697-0.17-10.398,3.771-10.578,9.951    c-0.178,6.178,4.293,10.258,9.99,10.426c5.949,0.177,10.523-3.637,10.701-9.814C53.996,74,49.654,69.793,43.705,69.617z"></path>
</g>
<div>Icons made by <a href="https://www.flaticon.com/authors/daniel-bruce" title="Daniel Bruce">Daniel Bruce</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a></div>

<g id='landline'>
	<path d="M29.33,19.339c-2.326-0.545-5.3-1.969-6.377-3.737c-0.603-0.984-0.666-2.094-0.179-3.042   c0.027-0.051,0.074-0.128,0.109-0.188c-0.028-0.209,0.021-0.486,0.172-0.847c0.011-0.024,0.012-0.027,0.02-0.044H11.122   c0.006,0.014,0.006,0.014,0.014,0.032c0,0,0.001,0.001,0.001,0.002c0.268,0.418,0.502,0.792,0.627,1.033   c0.495,0.961,0.431,2.07-0.17,3.055c-1.08,1.77-4.053,3.193-6.381,3.738L4.57,30.124c-0.07,1.183,0.705,2.149,1.723,2.149h21.958   c1.018,0,1.792-0.967,1.721-2.149L29.33,19.339z M13.683,26.765h-2.062c-0.38,0-0.688-0.309-0.688-0.688s0.308-0.688,0.688-0.688   h2.062c0.379,0,0.688,0.309,0.688,0.688S14.062,26.765,13.683,26.765z M13.683,24.143h-2.062c-0.38,0-0.688-0.308-0.688-0.687   c0-0.382,0.308-0.688,0.688-0.688h2.062c0.379,0,0.688,0.306,0.688,0.688C14.371,23.835,14.062,24.143,13.683,24.143z    M13.683,21.521h-2.062c-0.38,0-0.688-0.308-0.688-0.688c0-0.379,0.308-0.688,0.688-0.688h2.062c0.379,0,0.688,0.309,0.688,0.688   S14.062,21.521,13.683,21.521z M18.304,26.765h-2.061c-0.38,0-0.688-0.309-0.688-0.688s0.309-0.688,0.688-0.688h2.062   c0.379,0,0.688,0.309,0.688,0.688C18.991,26.456,18.683,26.765,18.304,26.765z M18.304,24.143h-2.061   c-0.38,0-0.688-0.308-0.688-0.687c0-0.382,0.309-0.688,0.688-0.688h2.062c0.379,0,0.688,0.306,0.688,0.688   C18.991,23.835,18.683,24.143,18.304,24.143z M18.304,21.521h-2.061c-0.38,0-0.688-0.308-0.688-0.688   c0-0.379,0.309-0.688,0.688-0.688h2.062c0.379,0,0.688,0.309,0.688,0.688C18.991,21.212,18.683,21.521,18.304,21.521z    M22.924,26.765h-2.062c-0.379,0-0.687-0.309-0.687-0.688s0.308-0.688,0.687-0.688h2.062c0.381,0,0.688,0.309,0.688,0.688   C23.612,26.456,23.306,26.765,22.924,26.765z M22.924,24.143h-2.062c-0.379,0-0.687-0.308-0.687-0.687   c0-0.382,0.308-0.688,0.687-0.688h2.062c0.381,0,0.688,0.306,0.688,0.688C23.612,23.835,23.306,24.143,22.924,24.143z    M22.924,21.521h-2.062c-0.379,0-0.687-0.308-0.687-0.688c0-0.379,0.308-0.688,0.687-0.688h2.062c0.381,0,0.688,0.309,0.688,0.688   C23.612,21.212,23.306,21.521,22.924,21.521z M34.372,13.114c-0.043,0.216-0.045,0.441-0.13,0.646   c-0.497,1.202-1.429,2.197-2.115,3.305c-0.885,1.414-8.406-1.634-7.437-3.521c0.365-0.698,1.789-2.626,1.896-3.401   c0.098-0.692-0.818-1.233-1.664-1.302c-2.232-0.181-5.083-0.017-7.452-0.002v0.002c-0.063,0-0.133-0.001-0.198-0.001   c-0.064,0-0.134,0.001-0.197,0.001V8.839c-2.369-0.015-5.22-0.178-7.452,0.002c-0.846,0.069-1.762,0.61-1.665,1.302   c0.108,0.775,1.531,2.703,1.896,3.401c0.971,1.887-6.55,4.935-7.435,3.521c-0.688-1.108-1.618-2.103-2.116-3.305   c-0.084-0.205-0.086-0.43-0.129-0.646c-1.104-4.93,3.148-9.96,9.551-10.476c2.445-0.198,4.896-0.31,7.35-0.354V2.272   c0.066,0.001,0.131,0.005,0.197,0.006c0.065-0.001,0.131-0.005,0.198-0.006v0.012c2.452,0.044,4.903,0.156,7.35,0.354   C31.222,3.153,35.474,8.185,34.372,13.114z"></path>
</g>

<g id='cellphone2'>
	<path d="M25.043,0H9.439c-1.3,0-2.364,1.063-2.364,2.364v7.483v14.789v7.483c0,1.301,1.064,2.363,2.364,2.363h15.604   c1.3,0,2.364-1.062,2.364-2.363v-7.483V9.847V2.364C27.407,1.063,26.343,0,25.043,0z M12.804,31.76h-2.548   c-0.469,0-0.85-0.38-0.85-0.849c0-0.47,0.381-0.851,0.85-0.851h2.548c0.469,0,0.85,0.381,0.85,0.851   C13.654,31.38,13.273,31.76,12.804,31.76z M12.804,28.52h-2.548c-0.469,0-0.85-0.381-0.85-0.85s0.381-0.85,0.85-0.85h2.548   c0.469,0,0.85,0.381,0.85,0.85S13.273,28.52,12.804,28.52z M12.804,25.28h-2.548c-0.469,0-0.85-0.38-0.85-0.849   c0-0.471,0.381-0.851,0.85-0.851h2.548c0.469,0,0.85,0.38,0.85,0.851C13.654,24.9,13.273,25.28,12.804,25.28z M12.804,22.041   h-2.548c-0.469,0-0.85-0.381-0.85-0.85s0.381-0.851,0.85-0.851h2.548c0.469,0,0.85,0.382,0.85,0.851S13.273,22.041,12.804,22.041z    M18.515,31.76h-2.547c-0.47,0-0.85-0.38-0.85-0.849c0-0.47,0.38-0.851,0.85-0.851h2.547c0.47,0,0.85,0.381,0.85,0.851   C19.364,31.38,18.984,31.76,18.515,31.76z M18.515,28.52h-2.547c-0.47,0-0.85-0.381-0.85-0.85s0.38-0.85,0.85-0.85h2.547   c0.47,0,0.85,0.381,0.85,0.85S18.984,28.52,18.515,28.52z M18.515,25.28h-2.547c-0.47,0-0.85-0.38-0.85-0.849   c0-0.471,0.38-0.851,0.85-0.851h2.547c0.47,0,0.85,0.38,0.85,0.851C19.364,24.9,18.984,25.28,18.515,25.28z M18.515,22.041h-2.547   c-0.47,0-0.85-0.381-0.85-0.85s0.38-0.851,0.85-0.851h2.547c0.47,0,0.85,0.382,0.85,0.851S18.984,22.041,18.515,22.041z    M24.226,31.76h-2.549c-0.469,0-0.85-0.38-0.85-0.849c0-0.47,0.381-0.851,0.85-0.851h2.549c0.469,0,0.85,0.381,0.85,0.851   C25.075,31.38,24.694,31.76,24.226,31.76z M24.226,28.52h-2.549c-0.469,0-0.85-0.381-0.85-0.85s0.381-0.85,0.85-0.85h2.549   c0.469,0,0.85,0.381,0.85,0.85S24.694,28.52,24.226,28.52z M24.226,25.28h-2.549c-0.469,0-0.85-0.38-0.85-0.849   c0-0.471,0.381-0.851,0.85-0.851h2.549c0.469,0,0.85,0.38,0.85,0.851C25.075,24.9,24.694,25.28,24.226,25.28z M24.226,22.041   h-2.549c-0.469,0-0.85-0.381-0.85-0.85s0.381-0.851,0.85-0.851h2.549c0.469,0,0.85,0.382,0.85,0.851S24.694,22.041,24.226,22.041z    M25.126,18.38H9.356V2.771h15.77V18.38z"></path>
</g>
<div>Icons made by <a href="http://www.freepik.com" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a></div>

<g id='cellphone'>
		<path d="M65.094,32.195h-6.982h-0.934c-2.064,0-3.738,1.674-3.738,3.745v0.406c0,2.073,1.674,3.748,3.741,3.748h6.989h0.924    c2.068,0,3.747-1.682,3.747-3.748l-0.004-0.411C68.841,33.869,67.162,32.195,65.094,32.195z"></path>
		<path d="M65.098,22.852h-1.649V4.734c0-2.604-2.13-4.734-4.735-4.734H27.475c-2.604,0-4.734,2.131-4.734,4.734v12.999    c-6.301,3.562-12.8,7.283-12.814,7.292C6.399,26.477,1.23,31.162,1.23,42.225c0,0.988,0.065,1.9,0.156,2.781    c0.029,0.258,0.061,0.506,0.096,0.755c0.091,0.647,0.205,1.266,0.341,1.854c0.049,0.21,0.087,0.429,0.14,0.63    c0.183,0.68,0.395,1.318,0.633,1.925c0.12,0.301,0.25,0.575,0.381,0.857c0.14,0.297,0.281,0.589,0.432,0.862    c0.175,0.329,0.35,0.646,0.542,0.947c0.046,0.07,0.096,0.134,0.143,0.205c4.556,6.887,12.961,6.918,12.961,6.918h5.686v5.379    c0,2.601,2.13,4.731,4.734,4.731h31.238c2.605,0,4.735-2.131,4.735-4.731v-6.561h0.722v-0.004h0.921    c2.071,0,3.75-1.675,3.746-3.746l0.004-0.408c-0.004-2.068-1.679-3.738-3.747-3.738H64.17h-6.059h-0.934    c-2.068,0-3.738,1.674-3.738,3.741v0.415c0,2.062,1.674,3.743,3.741,3.743h2.974v2.534h-34.12V27.323    c1.714-1.087,3.301-2.133,4.206-2.834c4.585-3.546,8.937-6.37,9.526-8.931c0.767-3.323-1.784-6.123-6.209-3.824    c-1.394,0.724-4.255,2.311-7.523,4.146V7.502l34.12,0.005V22.85h-2.043v0.004h-0.929c-2.069,0-3.748,1.674-3.748,3.747v0.406    c0,2.072,1.679,3.742,3.743,3.742h0.929h6.059h0.931c2.066,0,3.741-1.674,3.741-3.742V26.59    C68.841,24.531,67.167,22.852,65.098,22.852z M43.09,62.976c1.312,0,2.37,1.059,2.37,2.368c0,1.312-1.059,2.367-2.37,2.367    c-1.307,0-2.363-1.058-2.363-2.367C40.729,64.039,41.788,62.976,43.09,62.976z M48.093,4.558h-9.996    c-0.314,0-0.574-0.255-0.574-0.57c0-0.32,0.26-0.575,0.574-0.575h9.996c0.314,0,0.57,0.254,0.57,0.575    C48.663,4.302,48.407,4.558,48.093,4.558z"></path>
		<path d="M65.094,41.538H64.17h-6.992c-2.064,0-3.743,1.679-3.743,3.746v0.41c0,2.069,1.675,3.743,3.743,3.743h0.929h6.059h0.926    c2.071,0,3.741-1.674,3.746-3.743v-0.41C68.837,43.217,67.167,41.538,65.094,41.538z"></path>
	</g>

<script>
    //D3 visualiations

    //function for drawing a sample diagram in a given svg at given coords
    function draw_sample(svg, data, x, y, w, h, iconWidth){
      if(!iconWidth){
        iconWidth = 30;
      }

      var g=svg.append('g')
        .attr('class', 'sample-group')
        .attr('transform', 'translate('+x+','+y+')');

      //blue bar on left, red bar on right
      var blueW = data.dem.percentPop * w;
      var bluebar=g.append('rect')
        .attr('class', 'bluebar')
        .attr('fill', 'lightblue')
        .attr('width', blueW)
        .attr('height', h);

      //grey bar in middle
      var greyW = 0
      if(data.dem.percentPop+data.rep.percentPop <1){
        greyW = (1.0-data.dem.percentPop-data.rep.percentPop)*w;
        var greyBar = g.append('rect')
          .attr('class', 'greybar')
          .attr('fill', 'lightgrey')
          .attr('width', greyW)
          .attr('height', h)
          .attr('x', blueW);
      }

      var redbar=g.append('rect')
        .attr('class', 'redbar')
        .attr('fill', 'salmon')
        .attr('x', blueW+greyW)
        .attr('width', w* data.rep.percentPop)
        .attr('height', h);

      //draw icons in each group according to demographic breakdown
      function drawIcons(group, xOffset){
        //skip this step if icons is empty
        if(!group.icons || Object.keys(group.icons).length === 0){
          return;
        }

        //calculate how many we can comfortably fit and space them evenly
        var groupW = group.percentPop * w;
        var groupPop = Math.floor(groupW/iconWidth);
        var iconMargin = (groupW-iconWidth*groupPop)/(groupPop+1);

        //generate array of icon data objects
        var iconData = d3.range(0,groupPop).map(function(i){
          d= {'x': i*(iconMargin+iconWidth) + xOffset};
          return d;
        });
        var i=0;
        var j=0;
        //within each color, set icons proportional to their prevalence
        Object.keys(group.icons).forEach(function(icon){
          var numIcon = Math.round(groupPop*group.icons[icon]);
          numIcon = Math.min(numIcon, groupPop-i);
          for (k=0; k<numIcon; k++){
            iconData[i].icon=icon;
            i++;
          }
          //for each color, color the appropriate number of icons within the icon class
          Object.keys(group.colors).forEach(function(color){
            var numColor = Math.round(group.colors[color]*numIcon);
            numColor = Math.min(numColor, groupPop-j)
            for(k=0; k<numColor; k++){
              iconData[j].color = color;
              j++;
            }

          });
        });

        //now draw the icons
        var getIconHTML = function(d){
          if (!d.icon){
            d.icon='male';
          }
          var node= d3.select('g#'+d.icon).node();
          return node.innerHTML;
        }
        var getIconTransform = function(d){
          var s = iconWidth/this.getBBox().width;
          var y = (h-this.getBBox().height*s)/2;
          return 'translate('+d.x+','+y+') \
          scale('+s+')';
        }
        var groupIcons = g.selectAll('.icon')
          .data(iconData)
          .enter().append('g')
          .html(getIconHTML)
          .attr('transform', getIconTransform)
          .attr('fill', function(d){ return d.color; })
      }

      drawIcons(data.dem, 0);
      drawIcons(data.rep, blueW+greyW);

      //return bottom for convenience
      return y+h;
    }

    //demographics from pew research center: http://www.people-press.org/2016/09/13/2-party-affiliation-among-voters-1992-2016/
    //http://www.people-press.org/2016/09/13/1-the-changing-composition-of-the-political-parties/
    popdata = {
      'dem':{
        'percentPop':.48,
        'icons':{
          'male':.42,
          'female':.52
        },
        'colors':{
          'AntiqueWhite':.57,
          '#52361b':.21,
          'lightbrown':.12
        }
      },
      'rep':{
        'percentPop':.44,
        'icons':{
          'male':.58,
          'female':.42
        },
        'colors':{
          'AntiqueWhite':.86,
          '#52361b':.02,
          'lightbrown':.06,
          'grey':.06
        }
      }
    };

    //function for drawing arrow between samples
    function drawDownArrow(svg, x,y,h){
      var arrowHTML = d3.select('#downarrow').html();
      var g = svg.append('g')
        .attr('class', 'down-arrow')
        .html(arrowHTML);

      //scale appropriately
      var hScale = h/g.node().getBBox().height;
      var w = g.node().getBBox().width*hScale;
      g.attr('transform', 'translate('+(x-w)+','+y+') \
        scale('+hScale+')');

      return y+h;
    }

    //function for drawing big titles for whole illustration
    function drawSectionTitle(svg, x,y,t){
      svg.append("text")
      .attr('x', x)
      .attr('y', y+24)
      .attr('text-anchor', 'middle')
      .style('font-size', '24px')
      .text(t);
      return y+24;
    }

    //draw small subsection titles
    function drawSampleTitle(svg, x,y,t){
      svg.append("text")
        .attr('x', x)
        .attr('y', y+14)
        .attr('text-anchor', 'middle')
        .style('font-size', '14px')
        .style('font-weight', 'bold')
        .text(t);
      return y+14;
    }


    //draw general sampling illustration
    //args: svg, data, x, y, w, h
    var pad=50;
    var gensample = d3.select('#general-sampling')
      .style('padding-left',pad+'px')
      .style('padding-right',pad+'px')
    var w=gensample.node().clientWidth-pad*2;
    //SRS text
    var srsY = 24;
    gensample.append("text")
    .attr('x', w/2)
    .attr('y', srsY)
    .attr('text-anchor', 'middle')
    .style('font-size', '24px')
    .text('SRS: Pick participants at random');
    //title, population sample
    var textH = 14
    var titleY = srsY + 20 + textH;
    gensample.append("text")
      .attr('x', w/2)
      .attr('y', titleY)
      .attr('text-anchor', 'middle')
      .style('font-size', textH+'px')
      .style('font-weight', 'bold')
      .text('Population')
    var sampleY = titleY + 5;
    draw_sample(gensample, popdata, 0,sampleY, w,50)
    //arrow
    var arrowY = sampleY + 50 + 10;
    drawDownArrow(gensample, w/2, arrowY, 50);
    //small sample title
    var smallTitleY = arrowY + 50 + textH;
    gensample.append('text')
      .attr('x', w/2)
      .attr('y', smallTitleY)
      .attr('text-anchor', 'middle')
      .style('font-size', textH+'px')
      .style('font-weight', 'bold')
      .text('Sample');
    //small sample
    var smallW = w/2;
    var smallY = smallTitleY + 5;
    draw_sample(gensample, popdata, w/2-smallW/2, smallY, smallW, 50)
    //scale the svg to fit in all of this
    gensample.style('height', smallY+50+'px');

    //draw stratified sampling illustration

    var stratsample = d3.select('#stratified-sampling')
      .style('padding-left',pad+'px')
      .style('padding-right',pad+'px')
    var w=stratsample.node().clientWidth-pad*2;
    //section title
    var bottom = drawSectionTitle(stratsample, w/2, 0, 'Stratification: match sample to population');
    //population
    var stratSamplePop={
      'dem':{
        'percentPop':.7
      },
      'rep':{
        'percentPop':.3
      }
    };
    bottom = drawSampleTitle(stratsample, w/2, bottom+20, 'Population:70% Democrat, 30% Republican');
    bottom = draw_sample(stratsample, stratSamplePop, 0,bottom+5,w,50, 20);
    bottom = drawDownArrow(stratsample, w/2, bottom+10, 50);
    bottom = drawSampleTitle(stratsample, w/2, bottom+10, 'Sample: 70% Democrat, 30% Republican')
    bottom = draw_sample(stratsample, stratSamplePop, w/2-w/4,bottom+5,w/2,50, 20);
    stratsample.attr('height', bottom);

    //draw phone sampling bias
    phonebias = d3.select('#telephone-sampling')
      .style('padding-left', pad+'px')
      .style('padding-right', pad+'px');
    var w = phonebias.node().clientWidth-pad*2;
    var phonePop = {
      'dem':{
        'percentPop':.48,
        'colors':{
          'black':1
        },
        'icons':{
          'landline':.4,
          'cellphone':.6
        }
      },
      'rep':{
        'percentPop':.44,
        'colors':{
          'black':1
        },
        'icons':{
          'landline':.6,
          'cellphone':.4
        }
      }
    }

    var phoneSample = {
      'dem':{
        'percentPop':.40,
        'colors':{'black':1},
        'icons':{'landline':1}
      },
      'rep':{
        'percentPop':.60,
        'colors':{'black':1},
        'icons':{ 'landline':1}
      }
    }

    bottom=drawSectionTitle(phonebias, w/2, 0, 'Sampling Bias');
    bottom=drawSampleTitle(phonebias, w/2, bottom+20, 'Population: 48% Democrat, 44% Republican');
    bottom=draw_sample(phonebias, phonePop, 0,bottom+5,w,50);
    bottom=drawDownArrow(phonebias, w/2,bottom+10,50);
    bottom=drawSampleTitle(phonebias, w/2, bottom+5, 'Sample: 40% Democrat, 60% Republican')
    bottom=draw_sample(phonebias, phoneSample, w/2-w/4,bottom+5,w/2,50)

    phonebias.attr('height', bottom);

    //draw samples showing the election forecast over time
    var timeline = d3.select('#sampling-timeline')
      .style('padding-left',pad+'px')
      .style('padding-right',pad+'px');
    var w=timeline.node().clientWidth-pad*2;

    var augData = JSON.parse(JSON.stringify(popdata));
    augData.dem.percentPop = .88;
    augData.rep.percentPop = .11;
    var sepData = JSON.parse(JSON.stringify(popdata));
    sepData.dem.percentPop = .56;
    sepData.rep.percentPop = .43;

    console.log(augData);

    bottom = drawSectionTitle(timeline, w/2,0, 'Changing populations');
    bottom = drawSampleTitle(timeline, w/2, bottom+20, 'Aug. 2016: 88% Democrat, 11% Republican');
    bottom = draw_sample(timeline, augData, 0,bottom+5,w,50);
    bottom = drawDownArrow(timeline, w/2, bottom+10, 50);
    bottom = drawSampleTitle(timeline, w/2, bottom+5, 'Sep. 2016: 56% Democrat, 43% Republican');
    bottom = draw_sample(timeline, sepData, 0,bottom+5,w,50);
    bottom = drawDownArrow(timeline, w/2,bottom+10,50);
    bottom = drawSampleTitle(timeline, w/2,bottom+5, 'Election Day: ?');
    bottom = draw_sample(timeline, popdata, 0,bottom+5,w,50);

    //recolor the last sample so party colors are greyed out
    var redbars = document.getElementsByClassName('redbar');
    redbars[redbars.length-1].setAttribute('fill', 'lightgrey');
    var bluebars = document.getElementsByClassName('bluebar');
    bluebars[bluebars.length-1].setAttribute('fill', 'lightgrey');

    timeline.attr('height', bottom);


</script>

<div>Icons made by <a href="https://www.flaticon.com/authors/dave-gandy" title="Dave Gandy">Dave Gandy</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a></div>

</body>
